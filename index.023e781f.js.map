{"mappings":"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","sources":["src/js/body-logic/modal-win/modal.js","src/js/body-logic/render-cards.js","src/js/header-logic/feach-API.js","src/js/body-logic/modal-win/modal-btn.js"],"sourcesContent":["import { renderModalInformation } from '../../body-logic/render-cards';\nimport { getFetchedById } from '../../header-logic/feach-API';\n// import '../../lib-js/render-lib';\n\nimport {\n  btnWatched,\n  btnQueue,\n  arrIdCardForWatched,\n  arrIdCardForQueue,\n} from './modal-btn';\nconst container = document.querySelector('.main-container');\nconst modal = document.querySelector('.modal');\nconst clearModal = document.querySelector('.clearing-modal');\nconst modalBtn = document.querySelector('.btn-close');\nconst body = document.querySelector('body');\nconst modalWin = document.querySelector('.modal-window');\n\ncontainer.addEventListener('click', openModal);\n\nexport function openModal(e) {\n  const query = e.target.nodeName;\n  const dataId = e.target.dataset.action;\n  setIdFromLocalStorage(dataId);\n  modalWin.style.opacity = '1';\n  if (query === 'IMG' || query === 'P' || query === 'UL') {\n    getFetchedById(dataId).then(res => {\n      renderModalInformation(res);\n    });\n    modal.addEventListener('click', onBtnClick);\n    modal.classList.remove('visibility');\n    body.style.overflow = 'hidden';\n    modalBtn.addEventListener('click', onClose);\n  }\n}\n\nexport function onClose() {\n  clearModal.innerHTML = '';\n  modal.classList.add('visibility');\n  body.style.overflow = 'visible';\n  modalWin.style.opacity = '0';\n  modal.removeEventListener('click', onBtnClick);\n  localStorage.setItem('data-watched', JSON.stringify(arrIdCardForWatched));\n  localStorage.setItem('data-queue', JSON.stringify(arrIdCardForQueue));\n}\n\nexport function onBtnClick(e) {\n  const query = e.target.nodeName;\n  const queryClass = e.target.className;\n  const dataId = e.target.dataset.action;\n  const queryText = e.target.textContent;\n\n  const modalQueue = document.querySelector('.modal-btn__queue');\n  const modalWatched = document.querySelector('.modal-btn__watched');\n  if (queryClass === 'overlay') {\n    onClose();\n  }\n  if (query === 'BUTTON' && dataId === 'watched') {\n    btnWatched(modalWatched, queryText);\n  }\n  if (query === 'BUTTON' && dataId === 'queue') {\n    btnQueue(modalQueue, queryText);\n  }\n}\n\nfunction setIdFromLocalStorage(data) {\n  localStorage.setItem('data', data);\n}\n","import {\n  getFetchedByTrends,\n  getFetchBySearch,\n  getFetchedById,\n} from '../header-logic/feach-API';\n\nconst bodyEl = document.querySelector('.main-container');\nconst modalBox = document.querySelector('.clearing-modal');\n\nexport async function renderCardsByTrend() {\n  const getsTrands = await getFetchedByTrends();\n\n  renderBodyCards(getsTrands);\n}\n\nexport async function renderCardsBySearch() {\n  const getSearch = await getFetchBySearch();\n  renderBodyCards(getSearch);\n}\n\nexport function renderBodyCards(name) {\n  bodyEl.innerHTML = '';\n  name.results.map(({ poster_path, original_title, id, release_date }) => {\n    let imgPreview = 'https://image.tmdb.org/t/p/w500';\n    if (!poster_path) {\n      poster_path = '/wp-content/uploads/2022/05/coming-soon.jpg';\n      imgPreview = 'https://en9lish.com';\n    }\n    if (!release_date) {\n      release_date = 'N/A';\n    }\n\n    getFetchedById(id).then(res => {\n      let genres = res.genres.map(res => res.name);\n      if (genres.length === 0) {\n        genres.push('N/A');\n      }\n\n      if (genres.length > 3) {\n        genres = genres.slice(0, 2) + ', other';\n      }\n      genres = genres.toString().replaceAll(',', ', ');\n\n      const render = `<article class=\"box\" \">\n            <img class=\"movie-preview\"src=\"${imgPreview}${poster_path}\" alt=\"123\" width=\"336\" height=\"455\" data-action=\"${id}\" >\n            <ul class=\"info-list\" data-action=\"${id}\">\n              <li>\n              <p class=\"info-list__title\" data-action=\"${id}\">${original_title}</p>\n              </li>\n              <li>\n            <p class=\"info-list__genres\" data-action=\"${id}\">${genres} | ${release_date.slice(\n        0,\n        4\n      )}</p></li>\n          </ul>\n                      </article>`;\n\n      return bodyEl.insertAdjacentHTML('beforeend', render);\n    });\n  });\n}\n\nexport function renderModalInformation(name) {\n  let {\n    poster_path,\n    original_title,\n    id,\n    release_date,\n    vote_average,\n    vote_count,\n    popularity,\n    overview,\n  } = name;\n  let imgPreview = 'https://image.tmdb.org/t/p/w500';\n  if (!poster_path) {\n    poster_path = '/wp-content/uploads/2022/05/coming-soon.jpg';\n    imgPreview = 'https://en9lish.com';\n  }\n  if (!release_date) {\n    release_date = 'N/A';\n  }\n\n  getFetchedById(id).then(res => {\n    let genres = res.genres.map(res => res.name);\n    if (genres.length === 0) {\n      genres.push('N/A');\n    }\n    genres = genres.slice(0, 1);\n\n    const render = ` \n   \n     <div class=\"modal-box-img\"><img  src=\"${imgPreview}${poster_path}\" alt=\"123\" class=\"modal-img\" ></div>\n      <div class=\"modal-info\"> <h2 class=\"mobal__title\">${original_title}</h2>\n                <div class=\"helper-in-modal\">\n                    <ul class=\"mobal__list--description\">\n                        <li class=\"mobal-list__item\">\n                            <p class=\"mobal-item__text\">Vote / Votes</p>\n                        </li>\n                        <li class=\"mobal-list__item\">\n                            <p class=\"mobal-item__text\"> <span class=\"module__text-popularity\">Popularity</span> </p>\n                        </li>\n                        <li class=\"mobal-list__item\">\n                            <p class=\"mobal-item__text\">Original Title</p>\n                        </li>\n                        <li class=\"mobal-list__item\">\n                            <p class=\"mobal-item__text\">Genre</p>\n                        </li>\n                    </ul>\n                    <ul class=\"mobal__list--info\">\n                        <li class=\"mobal-list__item\">\n                            <p class=\"mobal-item__text\"><span class=\"module__text-vote\">${vote_average}</span> /\n                                <span class=\"module__text-votes\">${vote_count}</span>\n                            </p>\n                        </li>\n                        <li class=\"mobal-list__item\">\n                            <p class=\"mobal-item__text\">${popularity}</p>\n                        </li>\n                        <li class=\"mobal-list__item\">\n                            <p class=\"mobal-item__text\">${original_title}</p>\n                        </li>\n                        <li class=\"mobal-list__item\">\n                            <p class=\"mobal-item__text\">${genres}</p>\n                        </li>\n                    </ul>\n                </div>\n                <p class=\"mobal__title--about\">About</p>\n                <p class=\"mobal__title--about-text\">${overview}</p>\n                ${zxc(id)}</div>`;\n\n    return modalBox.insertAdjacentHTML('beforeend', render);\n  });\n}\n\nfunction zxc(id) {\n  const btnName = id.toString();\n\n  let watchBtn = '';\n  let queueBtn = '';\n  const getItemWatched = localStorage.getItem('data-watched');\n  const parseItemWatched = JSON.parse(getItemWatched);\n\n  const getItemQueue = localStorage.getItem('data-queue');\n  const parseItemQueue = JSON.parse(getItemQueue);\n\n  if (parseItemWatched.includes(btnName)) {\n    watchBtn = 'remove from Watched';\n  } else {\n    watchBtn = 'add to Watched';\n  }\n  if (parseItemQueue.includes(btnName)) {\n    queueBtn = 'remove from queue';\n  } else {\n    queueBtn = 'add to queue';\n  }\n\n  return `<ul class=\"modal-btn__list\">\n                    <li class=\"modal-btn__item\">\n                        <button type=\"button\" class=\"modal-btn__watched \" data-action=\"watched\" >${watchBtn}</button>\n                    </li>\n                    <li class=\"modal-btn__item\">\n                        <button type=\"button\" class=\"modal-btn__queue \" data-action=\"queue\" >${queueBtn}</button>\n                    </li>\n                </ul>`;\n}\n","// import input from './input';\n\nconst API_KEY = 'bcde96d2248e63a51f520e697b2ad108';\nconst FETCH_HTTP = 'https://api.themoviedb.org/3';\n\nexport async function getFetchedByTrends() {\n  const getFetch = await fetch(\n    `${FETCH_HTTP}/trending/movie/day?api_key=${API_KEY}&page=3`\n  );\n  const card = await getFetch.json();\n\n  return card;\n}\n\nexport async function getFetchBySearch(query) {\n  const getFetchFromSearch = await fetch(`\n${FETCH_HTTP}/search/movie?api_key=${API_KEY}&language=en-US&query=${query}&page=1&include_adult=false`);\n  const cardInfo = await getFetchFromSearch.json();\n\n  return cardInfo;\n}\n\nexport async function getFetchedById(id) {\n  const getFetch = await fetch(\n    `${FETCH_HTTP}/movie/${id}?api_key=${API_KEY}&language=en-US`\n  );\n  const card = await getFetch.json();\n\n  return card;\n}\n","// import { showWatchedFilms ,showWQueueFilms} from '../../lib-js/render-lib';\n\nconst resFromWatch = getIlocaltemWatchedme();\nconst resFromQueue = getlocalItemQueue();\n\nexport let arrIdCardForWatched = [];\nexport let arrIdCardForQueue = [];\nif (resFromWatch) {\n  arrIdCardForWatched = resFromWatch;\n}\nif (resFromQueue) {\n  arrIdCardForQueue = resFromQueue;\n}\n\nexport function btnWatched(modalWatched, queryText) {\n  let idCard = localStorage.getItem('data');\n  if (queryText === 'remove from Watched') {\n    if (arrIdCardForWatched.length === 1) {\n      arrIdCardForWatched = [];\n      modalWatched.textContent = 'add to Watched';\n      return;\n    }\n    for (let i = 0; i < resFromWatch.length; i++) {\n      if (resFromWatch[i] === idCard) {\n        resFromWatch.splice(i, 1);\n        modalWatched.textContent = 'Add to Watched';\n      }\n    }\n    return;\n  }\n  modalWatched.textContent = 'remove from Watched';\n  modalWatched.style.padding = '6px';\n  arrIdCardForWatched.push(idCard);\n}\n\nexport function btnQueue(modalQueue, queryText) {\n  let idCard = localStorage.getItem('data');\n\n  if (queryText === 'remove from queue') {\n    if (arrIdCardForQueue.length === 1) {\n      arrIdCardForQueue = [];\n      modalQueue.textContent = 'add to queue';\n      modalQueue.style.paddingRight = '16px';\n      modalQueue.style.paddingLeft = '16px';\n      return;\n    }\n    for (let i = 0; i < resFromQueue.length; i++) {\n      if (resFromQueue[i] === idCard) {\n        resFromQueue.splice(i, 1);\n        modalQueue.textContent = 'Add to queue';\n      }\n    }\n\n    return;\n  }\n  modalQueue.textContent = 'remove from queue';\n  modalQueue.style.padding = '6px';\n  arrIdCardForQueue.push(idCard);\n}\n\nfunction getIlocaltemWatchedme() {\n  const getItemWatched = localStorage.getItem('data-watched');\n  return (parseItemWatched = JSON.parse(getItemWatched));\n}\nfunction getlocalItemQueue() {\n  const getItemQueue = localStorage.getItem('data-queue');\n  return (parseItemQueue = JSON.parse(getItemQueue));\n}\n"],"names":["$iktQL","parcelRequire","$786497425f066802$var$container","document","querySelector","$786497425f066802$var$modal","$786497425f066802$var$clearModal","$786497425f066802$var$modalBtn","$786497425f066802$var$body","$786497425f066802$var$modalWin","$786497425f066802$export$f312d3bc7ef841a8","innerHTML","classList","add","style","overflow","opacity","removeEventListener","$786497425f066802$export$85806c12118d2fc","localStorage","setItem","JSON","stringify","$cLZ64","arrIdCardForWatched","arrIdCardForQueue","e","query","target","nodeName","queryClass","className","dataId","dataset","action","queryText","textContent","modalQueue","modalWatched","btnWatched","btnQueue","addEventListener","data","$9GtDm","getFetchedById","then","res","renderModalInformation","remove","$d5813fdadbf06417$var$bodyEl","$d5813fdadbf06417$var$modalBox","async","$d5813fdadbf06417$export$5f27dfaaf3e8cc09","$d5813fdadbf06417$export$6b853adde2b9035e","getFetchedByTrends","name","results","map","poster_path","original_title","id","release_date","imgPreview","res1","genres","length","push","slice","toString","replaceAll","render","insertAdjacentHTML","$d5813fdadbf06417$export$1ff5888c72cefb7","vote_average","vote_count","popularity","overview","res2","btnName","watchBtn","queueBtn","getItemWatched","getItem","parseItemWatched","parse","getItemQueue","parseItemQueue","includes","$d5813fdadbf06417$var$zxc","$70cf05f7ad1c3a8e$export$8c4aea83d88550e0","getFetch","fetch","json","$70cf05f7ad1c3a8e$export$9daaba8661b414a4","getFetchFromSearch","$70cf05f7ad1c3a8e$export$82d22d20aa70005b","$94c94464a201f257$var$resFromWatch","$94c94464a201f257$var$getIlocaltemWatchedme","$94c94464a201f257$var$resFromQueue","$94c94464a201f257$var$getlocalItemQueue","$94c94464a201f257$export$23e900ee498c1b2c","$94c94464a201f257$export$86082b867c728d13","$94c94464a201f257$export$b2cc59b4aaabff1b","idCard","padding","i","splice","$94c94464a201f257$export$15242a18a6e9df39","paddingRight","paddingLeft"],"version":3,"file":"index.023e781f.js.map"}